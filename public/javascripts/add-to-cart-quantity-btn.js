window.addEventListener("load",(function(t){astrawpWooQuantityButtons(),quantityInput()}));const astraminiCarttargetNode=document.getElementById("ast-site-header-cart");if(null!=astraminiCarttargetNode){const t={attributes:!1,childList:!0,subtree:!0};new MutationObserver((()=>{astrawpWooQuantityButtons(),quantityInput()})).observe(astraminiCarttargetNode,t)}function astrawpWooQuantityButtons(t){document.querySelector(".woocommerce div.product form.cart");t||(t=".qty"),$quantityBoxesWrap=document.querySelectorAll("div.quantity:not(.elementor-widget-woocommerce-cart .quantity):not(.buttons_added), td.quantity:not(.elementor-widget-woocommerce-cart .quantity):not(.buttons_added)");for(var e=0;e<$quantityBoxesWrap.length;e++){var a=$quantityBoxesWrap[e],n=a.querySelector(t);if(n&&"date"!==n.getAttribute("type")&&"hidden"!==n.getAttribute("type")){switch($qty_parent=n.parentElement,$qty_parent.classList.add("buttons_added"),astra_qty_btn.style_type){case"no-internal-border":n.classList.add("ast-no-internal-border"),$qty_parent.insertAdjacentHTML("afterbegin",'<label class="screen-reader-text" for="minus_qty">'+astra_qty_btn.minus_qty+'</label><a href="javascript:void(0)" id ="minus_qty" class="minus no-internal-border">-</a>'),$qty_parent.insertAdjacentHTML("beforeend",'<label class="screen-reader-text" for="plus_qty"> '+astra_qty_btn.plus_qty+'</label><a href="javascript:void(0)" id ="plus_qty" class="plus no-internal-border">+</a> ');break;case"vertical-icon":$qty_parent.classList.add("ast-vertical-style-applied"),n.classList.add("vertical-icons-applied"),$qty_parent.insertAdjacentHTML("beforeend",'<label class="screen-reader-text" for="plus_qty"> '+astra_qty_btn.plus_qty+'</label><a href="javascript:void(0)" id ="plus_qty" class="plus ast-vertical-icon">+</a><label class="screen-reader-text" for="minus_qty">'+astra_qty_btn.minus_qty+'</label><a  href="javascript:void(0)" id ="minus_qty" class="minus ast-vertical-icon">-</a>');break;default:$qty_parent.insertAdjacentHTML("afterbegin",'<label class="screen-reader-text" for="minus_qty">'+astra_qty_btn.minus_qty+'</label><a href="javascript:void(0)" id ="minus_qty" class="minus">-</a>'),$qty_parent.insertAdjacentHTML("beforeend",'<label class="screen-reader-text" for="plus_qty"> '+astra_qty_btn.plus_qty+'</label><a href="javascript:void(0)" id ="plus_qty" class="plus">+</a>')}$quantityEach=document.querySelectorAll("input"+t+":not(.product-quantity)");for(var r=0;r<$quantityEach.length;r++){var s=$quantityEach[r],i=s.getAttribute("min");i&&i>0&&parseFloat(s.value)<i&&(s.value=i)}let e=document.getElementsByTagName("BODY")[0],l=document.getElementsByClassName("cart")[0];if(e.classList.contains("single-product")&&!l.classList.contains("grouped_form")){let t=document.querySelector(".woocommerce input[type=number].qty");t&&t.addEventListener("keyup",(function(){let e=t.value;t.value=e}))}for(var o=a.querySelectorAll(".plus, .minus"),u=0;u<o.length;u++){o[u].addEventListener("click",(function(e){var a;a=e.target.parentElement.querySelector(t);var n,r=parseFloat(a.value),s=parseFloat(a.getAttribute("max")),i=parseFloat(a.getAttribute("min")),o=parseFloat(a.getAttribute("step")),u=Number.isInteger(o);r&&""!==r&&"NaN"!==r||(r=0),""!==s&&"NaN"!==s||(s=""),""!==i&&"NaN"!==i||(i=0),"any"!==o&&""!==o&&void 0!==o&&"NaN"!==o||(o=1),e.target.classList.contains("plus")?s&&(s==r||r>s)?a.value=s:(n=r+parseFloat(o),a.value=u?n:n.toFixed(1)):i&&(i==r||r<i)?a.value=i:r>0&&(n=r-parseFloat(o),a.value=u?n:n.toFixed(1));var l=new Event("change",{bubbles:!0});a.dispatchEvent(l);var c=document.getElementsByName("update_cart");if(c.length>0)for(var d=0;d<c.length;d++)c[d].disabled=!1,c[d].click();const y=a.value,p=a.getAttribute("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1");sendAjaxQuantityRequest(e.currentTarget,y,p)}),!1)}}}}function sendAjaxQuantityRequest(t,e,a){const n=t.closest(".woocommerce-mini-cart");if(n&&astra&&astra.single_product_qty_ajax_nonce&&astra.ajax_url){let t=astra.single_product_qty_ajax_nonce;n.classList.add("ajax-mini-cart-qty-loading");let r=new XMLHttpRequest;r.open("POST",astra.ajax_url,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("action=astra_add_cart_single_product_quantity&hash="+a+"&quantity="+e+"&qtyNonce="+t),r.onload=function(){if(r.readyState==XMLHttpRequest.DONE&&(200<=r.status||400<=r.status)){var t=document.createEvent("HTMLEvents");if(t.initEvent("wc_fragment_refresh",!0,!1),document.body.dispatchEvent(t),setTimeout((()=>{n.classList.remove("ajax-mini-cart-qty-loading")}),500),"undefined"==typeof wc_add_to_cart_params)return}}}}let typingTimer;jQuery((function(t){t(document.body).on("wc_fragments_refreshed",(function(){astrawpWooQuantityButtons(),quantityInput()}))})),function(){var t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){return this.addEventListener("load",(function(){astrawpWooQuantityButtons()})),t.apply(this,arguments)}}();let doneTypingInterval=500;function quantityInput(){if(document.querySelector(".woocommerce-mini-cart")){document.querySelectorAll(".input-text.qty").forEach((t=>{t.addEventListener("keyup",(e=>{clearTimeout(typingTimer),t.value&&(typingTimer=setTimeout((()=>{const t=e.target.value,a=e.target.getAttribute("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1");t&&sendAjaxQuantityRequest(e.target,t,a)}),doneTypingInterval))}))}))}}